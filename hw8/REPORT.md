# 3. Задачи

## Задача 1 (2 балла)

Ср. пропускная способность TCP:  $C = \frac{3}{4} \frac{W}{RTT}$ байт/с

$RTT = \frac{3}{4} \frac{W}{C}$

$ T = RTT * W / 2 = \frac{3}{8} \frac{W^2}{C}$ - функция от $C$

## Задача 2 (3 балла)

### a) $ 4S/R > S/R + RTT > 2S/R $

$0$ Устанавливаем соединение

$RTT$: Отправляем пакет 1, cwnd = 1

$RTT + (S/R + RTT)$: получаем ACK(1), cwnd = 2, и отсылаем пакеты 2 и 3

$RTT + (S/R + RTT) + (S/R + RTT) = 2S/R + 3RRT$: получаем ACK(2), cwnd = 3, отсылаем пакеты 4 и 5 (Начало непрерывной отправки пакетов)

$RTT + (S/R + RTT) + (2S/R + RTT) = 3S/R + 3RRT$: получаем ACK(3), до завершения отправки пакетов 4, 5, cwnd = 4, отсылаем пакеты 6 и 7

получаем ACK(4), до отправки всех остальных и поставит на отправку 8 и 9

...

получаем ACK(7), до отправки всех остальных и поставит на отправку 14 и 15


Итого $RTT + (S/R + RTT) + (S/R + RTT) + (12S/R + RTT) = 14S/R + 3RRT$

Ответ: $7S/R + 5RRT$

### б) $ S/R + RTT > 4S/R $

$0$ Устанавливаем соединение

$RTT$: Отправляем пакет 1, cwnd = 1

$RTT + (S/R + RTT)$: получаем ACK(1), cwnd = 2, и отсылаем пакеты 2 и 3

$RTT + (S/R + RTT) + (S/R + RTT) = 2S/R + 3RRT$: получаем ACK(2), cwnd = 3, отсылаем пакеты 4 и 5

$RTT + (S/R + RTT) + (2S/R + RTT) = 3S/R + 3RRT$: получаем ACK(3), до завершения отправки пакетов 4, 5, cwnd = 4, отсылаем пакеты 6 и 7

$RTT + (S/R + RTT) + (S/R + RTT) + (S/R + RTT) = 3S/R + 4RRT$ получаем ACK(4), после того как отправились пакеты 4, 5, 6 и 7 $2S/R + 3RRT + 4S/R = 6S/R < 3S/R + 4RRT$, отправляем пакеты 8, 9

получаем ACK(5), до отправки всех остальных и поставит на отправку 10 и 11

получаем ACK(6), до отправки всех остальных и поставит на отправку 12 и 13

получаем ACK(7), до отправки всех остальных и поставит на отправку 14 и 15


Итого $RTT + (S/R + RTT) + (S/R + RTT) + (S/R + RTT) + (8S/R + RTT) = 11S/R + 5RRT$

Ответ: $7S/R + 5RRT$

### в) $ S/R > RTT$

$0$ Устанавливаем соединение

$RTT$: Отправляем пакет 1, cwnd = 1

$RTT + (S/R + RTT) = S/R + 2RRT$: получаем ACK(1), cwnd = 2, и отсылаем пакеты 2 и 3

$RTT + (S/R + RTT) + (S/R + RTT) = 2S/R + 3RRT$: получаем ACK(2), быстрее чем отправился пакет 3, cwnd = 3, отсылаем пакеты 4 и 5

получаем ACK(3), до отправки всех остальных и поставит на отправку 6 и 7

...

получаем ACK(7), до отправки всех остальных и поставит на отправку 14 и 15



Итого $RTT + (S/R + RTT) + (14S/R + RTT) = 15S/R + 3RRT$

Ответ: $7S/R + 5RRT$

## Задача 3 (2 балла)

За время между размером окна $W/2$ и $W$ будет отправлено $M = \frac{W}{2} + (1 + \alpha) \frac{W}{2} + (1 + \alpha)^2 \frac{W}{2} + ... + W = (1 + (1 + \alpha) + (1 + \alpha)^2 + ... + 2) \frac{W}{2} = \frac{1 - 2(1 + \alpha)}{1 - (1 + \alpha)}\frac{W}{2} = \frac{1 + 2\alpha}{\alpha}\frac{W}{2} = \frac{(1 + 2\alpha)W}{2\alpha}$ байт

$S$ - скорость передачи

Частота потерь $L = S / M = \frac{2\alpha S}{(1 + 2\alpha)W}$

## Задача 4. Расслоение TCP (2 балла)

$4*RTT\_FE$ - у нас потратится на общение с внешним сервером

$RTT\_FE$ - на установление TCP-соединения

$RTT\_FE$ - на три окна данных(столько в среднем требуется для доставки ответа при медленном старте)

$+ RTT\_BE$ - на общение между внешним и внутренним сервером

Итого $4*RTT\_FE + RTT\_BE$
